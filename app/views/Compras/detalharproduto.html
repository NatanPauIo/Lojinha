#{extends 'main.html' /}
#{set title:'Detalhes do Produto' /}

<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/editar.css'}">

<div class="container">

    <div class="product-detail-container">
        <div class="product-image-section">
            <img src="${produto.foto}" alt="${produto.nome}">
        </div>

        <div class="product-info-section">
            <h1 class="product-title">${produto.nome}</h1>
            <p class="product-price">R$ ${produto.preco.format('###,##0.00')}</p>
            <p class="product-description">${produto.descricao}</p>
        </div>
    </div>

    <div class="reviews-section">
        <h2 class="reviews-title">Avaliações do Produto</h2>

        #{if avaliacao && avaliacao.size() > 0}
            <div class="reviews-list">
                #{list items:avaliacao, as:'a'}
                    <div class="review-card">
                        <h3 class="review-author">${a.usuario}</h3>
                        <p class="review-text">${a.mensagem}</p>
                    </div>
                #{/list}
            </div>
        #{/if}
        #{else}
            <p class="no-reviews">Este produto ainda n�o possui avalia��es.</p>
        #{/else}

       <!-- Formul�rio para nova avalia��o -->
        <div class="new-review-section">
            <h2 class="section-title">Deixe sua Avaliações</h2>
        <form class="review-form" action="@{Compras.salvaravaliacao}" method="POST">
            <input type="hidden" name="a.produto.id" value="${produto.id}">

            <div class="form-group">
                <label>Seu nome</label>
                <input type="text" name="a.usuario" required>
            </div>

            <div class="form-group">
                <label>Sua mensagem</label>
                <textarea name="a.mensagem" required></textarea>
            </div>

            <button type="submit" class="btn-submit">Enviar Avaliação</button>
        </form>
    </div>

</div>
</div>
